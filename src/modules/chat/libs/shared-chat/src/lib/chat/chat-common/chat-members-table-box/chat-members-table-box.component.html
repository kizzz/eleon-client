<p-table [lazy]="true" (onLazyLoad)="loadUsers($event)" [totalRecords]="rowsCount" [loading]="loading" [value]="rows"
  [paginator]="true" [rows]="pageSize" [(selection)]="selectedRows" (selectionChange)="onSelectionChange($event)" selectionMode="multiple"
  [selectionMode]="selectionMode" sortMode="single" class="cell-center w-full">
  <ng-template pTemplate="caption">
    <div class="p-inputgroup">
      <input type="text" pInputText placeholder="{{'Infrastructure::Search' | abpLocalization}}"
          [(ngModel)]="filter" (input)="onFilterChange()" (ngModelChange)="onSearchInput()">
      <button type="button" pButton pRipple icon="pi pi-search" styleClass="p-button-info" class="p-button-text" (click)="onFilterChange()"></button>
    </div>
  </ng-template>
  <ng-template pTemplate="body" let-row>
    <tr *ngIf="row.isPreselected">
      <ng-container *ngTemplateOutlet="cols"></ng-container>
      <td style="width:40px" class="lg:justify-content-center text-center">
        <div class="fa fa-check text-green-500" [pTooltip]="'Collaboration::UserAlreadyinChat' | abpLocalization"></div>
      </td>
    </tr>

    <tr *ngIf="!row.isPreselected" [selectableRow]="row">
      <ng-container *ngTemplateOutlet="cols"></ng-container>
      <td style="width:40px; padding:10px" class="lg:justify-content-center text-center">
        <p-tableCheckbox [value]="row"></p-tableCheckbox>
      </td>
    </tr>

    <ng-template #cols>
      <td style="padding:10px">
        <div class="flex align-items-center gap-2">
          <app-profile-picture [userId]="row.data.id" size="medium"></app-profile-picture>
          <div class="textAlign w-full"><app-ellipsis [text]="row.userName"></app-ellipsis></div>
        </div>
      </td>
    </ng-template>
  </ng-template>

  <ng-template pTemplate="emptymessage">
    <tr>
      <td class="w-full" colspan="100">
        <span>{{'Collaboration::NoUsers' | abpLocalization}}</span>
      </td>
    </tr>
  </ng-template>
</p-table>