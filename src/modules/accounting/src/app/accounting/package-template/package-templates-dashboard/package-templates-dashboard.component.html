
    
        <app-page-title [title]="title" icon="fas fa-user-alt">
      </app-page-title>
    
    <div class="content">
      <div #tableCard class="card table-card">
        <div class="card-body">
          <p-table *appResponsiveTable="'md'; let scrollable; let breakpoint = breakpoint" [scrollable]="scrollable"
            [responsive]="true" responsiveLayout="stack" [breakpoint]="breakpoint" scrollDirection="both"
            [lazy]="true" (onLazyLoad)="loadPackageTemplates($event)" [rows]="rowsCount"
            styleClass="pr-table" [totalRecords]="totalRecords" [loading]="loading" [value]="rows" [paginator]="true"
            (onRowSelect)="select($event)" selectionMode="single" sortOrder="-1" sortMode="single" sortField="CreationTime">
            <ng-template pTemplate="caption">
              <div class="grid mt-0">
                <div class="col-8 md:col-6 lg:col-6 md:pl-4 p-0 flex align-items-center">
                  <div class="p-inputgroup">
                    <input type="text" pInputText #searchField
                      placeholder="{{'Infrastructure::Search' | abpLocalization}}"
                      [(ngModel)]="searchQueryText">
                    <button type="button" (click)="search($event)" pButton pRipple icon="pi pi-search"
                      styleClass="p-button-info" class="p-button-text"></button>
                    <button type="button" pButton pRipple icon="pi pi-times-circle" class="p-button-danger p-button-text"
                      (click)="clear($event)"></button>
                  </div>
                </div>
              </div>
              <div class="grid small-width-only">
                <div class="col-12 p-0">
                  <p-accordion>
                    <p-accordionTab [header]="'Infrastructure::Filters' | abpLocalization">
                      <div *ngIf="showActor" class="small-width-only row">
                        <div class="col-4 flex text-center justify-content-center align-items-center">
                          {{"AccountingModule::PackageTemplate:Header:Initiator" | abpLocalization}}</div>
                        <div class="col-6 flex justify-content-center align-items-center">
                          <p-columnFilter class="w-full" type="text" field="initiator" matchMode="in" [showMenu]="false"
                            [showClearButton]="false">
                          </p-columnFilter>
                        </div>
                        <div class="col-2 flex justify-content-center align-items-center" pSortableColumn="creatorName">
                          <p-sortIcon field="creatorName"></p-sortIcon>
                        </div>
                      </div>
                    </p-accordionTab>
                  </p-accordion>
                </div>
              </div>
            </ng-template>
            <ng-template pTemplate="header">
              <tr>
                <th appResponsiveColumn="60" pSortableColumn="id">
                  {{ "AccountingModule::PackageTemplate:Header:Id" | abpLocalization }}
                  <p-sortIcon field="id"></p-sortIcon>
                </th>
                <th pSortableColumn="name">
                  {{ "AccountingModule::PackageTemplate:Header:Name" | abpLocalization }}
                  <p-sortIcon field="name"></p-sortIcon>
                </th>
                <th appResponsiveColumn="160" pSortableColumn="billingPeriodType">
                  {{ "AccountingModule::PackageTemplate:Header:BillingPeriodType" | abpLocalization }}
                  <p-sortIcon field="billingPeriodType"></p-sortIcon>
                </th>
                <th appResponsiveColumn="200" pSortableColumn="creatorName">
                  {{ "AccountingModule::PackageTemplate:Header:Initiator" | abpLocalization }}
                </th>
                <th appResponsiveColumn="150" pSortableColumn="creationTime">
                  {{ "AccountingModule::PackageTemplate:Header:CreationDate" | abpLocalization }}
                  <p-sortIcon field="creationTime"></p-sortIcon>
                </th>
                <th appResponsiveColumn="30">
                </th>
              </tr>
              <tr>
                <th appResponsiveColumn="60">
                </th>
                <th>
                  <p-columnFilter type="text" field="packageName" matchMode="in" [showMenu]="false"></p-columnFilter>
                </th>
                <th appResponsiveColumn="160">
                  <p-columnFilter matchMode="in" field="billingPeriodType" [showMenu]="false" [showClearButton]="false">
                    <ng-template pTemplate="header">
                      <div class="px-3 pt-3 pb-0">
                        <span class="font-bold">{{ "AccountingModule::PackageTemplate:Header:BillingPeriodType" | abpLocalization }}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-multiSelect [options]="localizedBillingPeriodTypes" optionLabel="name" autoWidth="false"
                        [style]="{'width':'100%'}" placeholder="{{ 'AccountingModule::PackageTemplate:Header:BillingPeriodType' | abpLocalization }}"
                        appendTo="body" [showClear]="true" (onClear)="filter()" [showHeader]="false"
                        (onChange)="filter($event.value)">
                      </p-multiSelect>
                    </ng-template>
                  </p-columnFilter>
                </th>
                <th appResponsiveColumn="200">
                  <p-columnFilter type="text" field="creatorName" matchMode="in" [showMenu]="false"></p-columnFilter>
                </th>
                <th appResponsiveColumn="150">
                  <p-columnFilter matchMode="in" [showClearButton]="false" field="creationTime" [showMenu]="false"
                    [style]="{'overflow':'visible'}">
                    <ng-template pTemplate="header">
                      <div class="px-3 pt-3 pb-0">
                        <span class="font-bold">{{ "AccountingModule::PackageTemplate:Header:CreationDate" | abpLocalization }}</span>
                      </div>
                    </ng-template>
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                      <p-calendar (onSelect)="filter(lastLoadEvent)" [showIcon]="false" inputId="icon" [showClear]="true"
                        (onClear)="filter()" [readonlyInput]="true" [(ngModel)]="creationDateRangeFilter" selectionMode="range"
                        appendTo="body" placeholder="{{ 'AccountingModule::PackageTemplate:Header:CreationDate' | abpLocalization }}">
                      </p-calendar>
                    </ng-template>
                  </p-columnFilter>
                </th>
                <th style="width:30px">
                </th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-row>
              <tr [pSelectableRow]="row">
                <td appResponsiveColumn="60">
                  <span class="non-editing-only p-column-title">{{'AccountingModule::PackageTemplate:Header:Id' |
                    abpLocalization}}</span>
                  <span class="column-content">
                    {{row.data.docEntry | slice:0:8}}
                  </span>
                </td>
                <td>
                  <span class="non-editing-only p-column-title">{{'AccountingModule::PackageTemplate:Header:Name' |
                    abpLocalization}}</span>
                  <span class="column-content">
                    {{row.data.packageName }}
                  </span>
                </td>
                <td appResponsiveColumn="160">
                  <span class="non-editing-only p-column-title">{{'AccountingModule::PackageTemplate:Header:BillingPeriodType' |
                    abpLocalization}}</span>
                  <span class="column-content">
                    {{getBillingPeriodTypeName(row.data.billingPeriodType)}}
                  </span>
                </td>
                <td appResponsiveColumn="200">
                  <span class="non-editing-only p-column-title">{{'AccountingModule::PackageTemplate:Header:Initiator' |
                    abpLocalization}}</span>
                  <span class="column-content">
                    {{row.data.creatorName}}
                  </span>
                </td>
                <td appResponsiveColumn="150">
                  <span class="non-editing-only p-column-title">{{'AccountingModule::PackageTemplate:Header:CreationDate' |
                    abpLocalization}}</span>
                  <span class="column-content">
                    {{row.data.creationTime | date:'shortDate'}}
                  </span>
                </td>
                <td appResponsiveColumn="30">
                  <div class="column-content">
                    <span (click)="select(row)" class="cursor-pointer text-primary">
                      <i class="fa-solid fa-magnifying-glass" style="font-size: medium;"></i>
                    </span>
                  </div>
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
              <tr class="table-emptymessage">
                <td class="w-full" colspan="8">
                  <div class="card w-full">
                    <div class="card-body w-full">
                      <div class="card-header">
                        {{'AccountingModule::NoPackageTemplates' | abpLocalization}}
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>

    <app-package-template-create-dialog
      [(display)]="showPackageTemplateCreateDialog"
      (createdPackageTemplate)="onPackageTemplateCreated($event)"
    ></app-package-template-create-dialog>
  
  