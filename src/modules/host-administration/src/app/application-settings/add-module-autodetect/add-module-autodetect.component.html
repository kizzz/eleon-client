<div class="dialog-max">
    <div class="grid">
      <div class="col-2 flex align-items-center gap-3">
        <span appRequired>{{ 'Infrastructure::Module:Source' | abpLocalization }}</span>
      </div>
      <div class="col-10 flex align-items-center gap-3">
        <input
          pInputText
          class="w-full"
          [(ngModel)]="remoteUrl"
          placeholder="https://myhost/module"
        />
        <p-button
          label="{{ 'Infrastructure::Load' | abpLocalization }}"
          (click)="loadExposes()"
          icon="pi pi-download"
          [text]="true"
          [raised]="true"
        ></p-button>
      </div>
    </div>

    <div class="grid mt-4">
      <div class="col-12">
        <h3>{{ 'Infrastructure::Modules' | abpLocalization }}</h3>
        <p-table [value]="exposesList" class="p-datatable-sm" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th></th>
              <th>{{ 'Infrastructure::Module:Id' | abpLocalization }}</th>
              <th>{{ 'Infrastructure::Module:PluginName' | abpLocalization }}</th>
              <th>{{ 'Infrastructure::Module:ExposeKey' | abpLocalization }}</th>
              <th>{{ 'Infrastructure::Module:LoadLevel' | abpLocalization }}</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-item>
            <tr>
              <td>
                <p-checkbox [(ngModel)]="item.selected" binary="true" *ngIf="item.isUnique"></p-checkbox>
              </td>
              <td>{{ item.pluginName}}_{{ item.displayName }}</td>
              <td>{{ item.pluginName }}</td>
              <td>{{ item.key }}</td>
              <td>
                <p-select
                  appendTo="body"
                  class="w-full"
                  [options]="loadLevels"
                  [(ngModel)]="item.loadLevel"
                  optionLabel="label"
                  optionValue="value"
                  placeholder="{{ 'Infrastructure::Module:SelectLevel' | abpLocalization }}"
                  [disabled]="!item.isUnique"
                ></p-select>
              </td>
            </tr>
          </ng-template>          
          <ng-template pTemplate="emptymessage">
            <tr class="table-emptymessage">
              <td class="w-full" colspan="5">
                <div class="card w-full">
                  <div class="card-body w-full text-center">
                    {{ 'Infrastructure::Modules:List:Empty' | abpLocalization }}
                  </div>
                </div>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>

  <p-footer class="flex gap-3 justify-content-end">
    <p-button
      icon="pi pi-times"
      [label]="'Infrastructure::Cancel' | abpLocalization"
      (click)="closeDialog()"
      [text]="true"
      [raised]="true"
      styleClass="p-button-secondary"
    ></p-button>
    <p-button
      icon="pi pi-plus"
      [label]="'Infrastructure::AddModules' | abpLocalization"
      (click)="addSelectedModules()"
      [disabled]="!hasSelection()"
      [text]="true"
      [raised]="true"
      styleClass="p-button-success"
    ></p-button>
  </p-footer>
